<svg width="960" height="720" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" overflow="hidden"><defs><clipPath id="clip0"><rect x="0" y="0" width="960" height="720"/></clipPath></defs><g clip-path="url(#clip0)"><rect x="0" y="0" width="960" height="720" fill="#FFFFFF"/><text font-family="DengXian Light,DengXian Light_MSFontService,sans-serif" font-weight="300" font-size="48" transform="translate(53.6667 97)">rdt2.1: 接收方处理混乱的<tspan font-size="48" x="538" y="0">ACK/NAKs</tspan><tspan fill="#919293" font-family="Arial,Arial_MSFontService,sans-serif" font-weight="400" font-size="19" x="810" y="596">32</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="19" x="598.167" y="221">sndpkt = make_pkt(NAK, chksum)</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="19" x="598.167" y="244">udt_send(sndpkt)</tspan></text><path d="M319.5 382.5C319.5 358.2 337.856 338.5 360.5 338.5 383.144 338.5 401.5 358.2 401.5 382.5 401.5 406.801 383.144 426.5 360.5 426.5 337.856 426.5 319.5 406.801 319.5 382.5Z" stroke="#000000" stroke-width="1.33333" stroke-linejoin="round" stroke-miterlimit="10" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="SimHei,SimHei_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(334.833 366)">等待来<tspan font-size="19" x="0" y="23">自下层</tspan><tspan font-size="19" x="13.5" y="44">的</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="19" x="32.1667" y="44">0</tspan></text><path d="M372.837 342.264 373.675 334.534 375.364 327.381 377.9 320.559 381.117 314.398 385.186 308.726 389.751 303.575 395.175 298.907 400.914 294.761 406.992 291.111 413.765 288.113 420.663 285.469 427.915 283.315 435.513 281.819 443.248 280.663 450.995 280 458.742 279.834 466.656 280.163 474.253 281.155 481.983 282.474 489.386 284.125 496.483 286.445 503.394 289.257 509.802 292.4 516.053 296.212 521.461 300.191 526.541 304.841 531.111 309.989C531.133 310.012 531.152 310.038 531.169 310.064L534.854 315.656 537.907 321.641C537.921 321.669 537.934 321.698 537.944 321.729L540.121 328.143 541.484 334.97 541.628 336.969C541.654 337.336 541.377 337.655 541.009 337.68 540.642 337.706 540.324 337.429 540.298 337.061L540.176 335.229 538.859 328.571 536.681 322.157 536.719 322.246 533.741 316.389 530.056 310.798 530.114 310.874 525.64 305.824 520.67 301.265 515.358 297.35 509.214 293.597 502.892 290.492 496.068 287.712 489.096 285.427 481.759 283.789 474.08 282.477 466.601 281.495 458.771 281.167 451.108 281.329 443.445 281.982 435.77 283.128 428.294 284.593 421.14 286.714 414.304 289.333 407.678 292.255 401.695 295.842 396.044 299.918 390.749 304.46 386.269 309.505 382.298 315.016 379.15 321.025 376.661 327.688 375 334.678 374.163 342.407C374.123 342.773 373.794 343.038 373.428 342.998 373.062 342.959 372.798 342.63 372.837 342.264ZM540.963 337.015 544.769 334.078 541.333 342.336 536.788 334.632Z"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(652.167 396)">rdt_rcv(rcvpkt) &amp;&amp; <tspan font-size="19" x="15.5" y="23">not corrupt(rcvpkt) &amp;&amp;</tspan><tspan font-size="19" x="15.5" y="45">has_seq0(rcvpkt)</tspan></text><path d="M651.5 450.5 855.5 450.5" stroke="#000000" stroke-width="2.66667" stroke-linejoin="round" stroke-miterlimit="10" fill="none" fill-rule="evenodd"/><path d="M376.809 433.713 376.994 435.232 378.642 441.457 381.11 447.352 381.065 447.263 384.395 452.746 388.183 457.671 392.621 462.092 392.55 462.03 397.878 466.018 403.501 469.647 409.604 472.771 416.059 475.578 422.997 477.883 430.111 479.697 437.391 481.016 445.017 482.008 452.647 482.67 460.249 482.667 468.046 482.336 475.508 481.673 483.126 480.515 490.404 478.862 497.362 476.877 504.156 474.561 510.586 471.595 516.548 468.454 521.984 464.833 526.933 460.879 531.198 456.451 534.803 451.534 537.761 446.443 537.713 446.545 539.877 440.73 541.183 434.836 541.169 434.929 541.669 428.449C541.697 428.082 542.018 427.807 542.385 427.835 542.752 427.864 543.027 428.184 542.998 428.551L542.499 435.032C542.496 435.063 542.492 435.094 542.485 435.125L541.127 441.195 538.962 447.011C538.949 447.046 538.933 447.08 538.914 447.113L535.878 452.324 532.157 457.377 527.764 461.921 522.723 465.943 517.17 469.634 511.144 472.806 504.586 475.823 497.728 478.159 490.699 480.162 483.326 481.833 475.626 483.001 468.103 483.668 460.249 484.001 452.532 483.998 444.845 483.33 437.153 482.328 429.781 480.989 422.576 479.148 415.527 476.8 408.996 473.957 402.777 470.767 397.079 467.085 391.751 463.097C391.725 463.078 391.701 463.058 391.679 463.035L387.126 458.483 383.255 453.438 379.925 447.955C379.908 447.926 379.893 447.897 379.88 447.866L377.353 441.797 375.671 435.394 375.485 433.875C375.441 433.509 375.701 433.177 376.066 433.132 376.432 433.088 376.764 433.348 376.809 433.713ZM376.147 433.794 372.5 436.926 375.5 428.5 380.441 435.956Z"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(320.667 514)">rdt_rcv(rcvpkt) &amp;&amp; notcorrupt(rcvpkt) <tspan font-size="19" x="10.3333" y="25">&amp;&amp; has_seq1(rcvpkt)</tspan></text><path d="M318.5 553.5 622.5 553.5" stroke="#000000" stroke-width="2.66667" stroke-linejoin="round" stroke-miterlimit="10" fill="none" fill-rule="evenodd"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(321.667 581)">extract(rcvpkt,data)<tspan font-size="19" x="0" y="23">deliver_data(data)</tspan><tspan font-size="19" x="0" y="45">sndpkt = make_pkt(ACK, chksum)</tspan><tspan font-size="19" x="0" y="67">udt_send(sndpkt)</tspan></text><path d="M497.5 386.5C497.5 362.2 516.528 342.5 540 342.5 563.472 342.5 582.5 362.2 582.5 386.5 582.5 410.801 563.472 430.5 540 430.5 516.528 430.5 497.5 410.801 497.5 386.5Z" stroke="#000000" stroke-width="1.33333" stroke-linejoin="round" stroke-miterlimit="10" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="SimHei,SimHei_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(514 371)">等待来<tspan font-size="19" x="0" y="23">自下层</tspan><tspan font-size="19" x="13.5" y="44">的</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="19" x="32.1667" y="44">1</tspan></text><path d="M584.986 370.668 592.986 370.502 600.105 369.84 606.413 369.013 612.015 367.697 616.957 366.054 621.046 364.094 624.504 362.124 624.411 362.188 627.244 359.864 629.514 357.434 629.446 357.519 631.113 355.03 631.043 355.166 632.043 352.51 632.012 352.622 632.512 349.966 632.668 347.392 632.68 347.565 632.18 345.075 632.215 345.193 631.215 342.703 629.922 340.463 628.306 338.381 628.404 338.483 626.237 336.657 623.798 335.043 623.884 335.091 621.05 333.763 617.967 332.8 618.068 332.823 614.735 332.325 611.302 332.166 607.558 332.496 603.635 333.315 599.536 334.625 595.279 336.587 590.999 339.049 586.562 342.327 582.109 346.273 577.646 350.885 576.413 352.379C576.178 352.663 575.758 352.703 575.474 352.468 575.19 352.233 575.151 351.813 575.385 351.529L576.688 349.957 581.225 345.275 585.771 341.254 590.335 337.893 594.722 335.376 599.131 333.354 603.365 332.009 607.443 331.168 611.365 330.834 614.932 331.007 618.265 331.505C618.3 331.51 618.334 331.518 618.367 331.528L621.616 332.556 624.45 333.884C624.479 333.898 624.508 333.914 624.535 333.932L627.096 335.638 629.263 337.463C629.299 337.494 629.332 337.528 629.361 337.566L631.078 339.799 632.452 342.206 633.452 344.696C633.467 344.733 633.479 344.773 633.487 344.813L633.987 347.302C633.998 347.359 634.002 347.418 633.999 347.475L633.822 350.213 633.322 352.868C633.315 352.906 633.304 352.944 633.291 352.98L632.291 355.635C632.273 355.683 632.249 355.729 632.221 355.771L630.554 358.261C630.534 358.291 630.511 358.32 630.487 358.346L628.089 360.895 625.256 363.219C625.227 363.243 625.196 363.264 625.163 363.283L621.621 365.297 617.377 367.319 612.319 368.996 606.587 370.335 600.228 371.168 593.014 371.835 585.014 372.001C584.646 372.008 584.341 371.716 584.334 371.348 584.326 370.98 584.618 370.675 584.986 370.668ZM575.899 351.954 580.681 352.448 572.5 356.064 574.516 347.35Z"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(347.167 135)">rdt_rcv(rcvpkt) &amp;&amp; notcorrupt(rcvpkt) <tspan font-size="19" x="10.3333" y="23">&amp;&amp; has_seq0(rcvpkt)</tspan></text><path d="M340.5 174.5 541.5 174.5" stroke="#000000" stroke-width="2.66667" stroke-linejoin="round" stroke-miterlimit="10" fill="none" fill-rule="evenodd"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(342.333 195)">extract(rcvpkt,data)<tspan font-size="19" x="0" y="23">deliver_data(data)</tspan><tspan font-size="19" x="0" y="45">sndpkt = make_pkt(ACK, chksum)</tspan><tspan font-size="19" x="0" y="67">udt_send(sndpkt)</tspan></text><path d="M577.92 424.059 584.068 429.039 590.01 433.159 595.459 436.456 600.555 438.916 605.338 440.892 609.737 442.025 613.667 442.676 613.557 442.667 617.213 442.667 617.114 442.675 620.438 442.177 623.349 441.364 623.214 441.418 625.706 440.09 625.569 440.187 627.563 438.361 629.163 436.433 629.108 436.511 630.437 434.353 630.372 434.491 631.203 432.002 631.679 429.434 631.667 429.557 631.667 426.735 631.677 426.851 631.179 424.029 630.365 421.279 630.401 421.375 629.072 418.553 627.448 415.967 627.512 416.053 625.186 413.397 622.59 411.136 619.648 409.016 616.063 407.069 611.981 405.443 607.575 404.307 602.647 403.49 597.233 403.165 591.161 403.498 584.713 404.159 583.021 404.525C582.661 404.603 582.307 404.373 582.229 404.013 582.152 403.653 582.382 403.299 582.742 403.222L584.577 402.833 591.089 402.166 597.314 401.835 602.866 402.174 607.909 403.017 612.476 404.205 616.701 405.898 620.428 407.935 623.468 410.132 626.189 412.518 628.515 415.174C628.539 415.201 628.56 415.23 628.579 415.26L630.278 417.985 631.608 420.807C631.622 420.838 631.634 420.87 631.644 420.903L632.492 423.797 632.99 426.619C632.997 426.657 633.001 426.696 633.001 426.735L633.001 429.557C633.001 429.598 632.997 429.639 632.989 429.68L632.468 432.424 631.637 434.914C631.621 434.962 631.599 435.009 631.572 435.052L630.243 437.21C630.226 437.237 630.208 437.263 630.187 437.287L628.464 439.344 626.47 441.17C626.429 441.208 626.383 441.24 626.333 441.267L623.841 442.595C623.798 442.617 623.752 442.635 623.706 442.649L620.635 443.495 617.312 443.993C617.279 443.998 617.246 444.001 617.213 444.001L613.557 444.001C613.521 444.001 613.484 443.998 613.448 443.992L609.402 443.315 604.828 442.124 599.974 440.116 594.768 437.597 589.25 434.254 583.229 430.075 577.08 425.095C576.794 424.863 576.75 424.443 576.982 424.157 577.214 423.871 577.634 423.827 577.92 424.059ZM582.881 403.874 586.326 407.227 577.666 404.99 584.652 399.404Z"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(625.667 286)">rdt_rcv(rcvpkt) &amp;&amp; (corrupt(rcvpkt)</text><path d="M652.5 297.5 855.5 297.5" stroke="#000000" stroke-width="2.66667" stroke-linejoin="round" stroke-miterlimit="10" fill="none" fill-rule="evenodd"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(647.5 479)">sndpkt = make_pkt(ACK, <tspan font-size="19" x="0" y="23">chksum)</tspan><tspan font-size="19" x="0" y="45">udt_send(sndpkt)</tspan><tspan font-size="19" x="-617.5" y="-85">rdt_rcv(rcvpkt) &amp;&amp; </tspan><tspan font-size="19" x="-602" y="-62">not corrupt(rcvpkt) &amp;&amp;</tspan><tspan font-size="19" x="-602" y="-40">has_seq1(rcvpkt)</tspan></text><path d="M29.5001 449.5 233.5 449.5" stroke="#000000" stroke-width="2.66667" stroke-linejoin="round" stroke-miterlimit="10" fill="none" fill-rule="evenodd"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(32.5001 270)">rdt_rcv(rcvpkt) &amp;&amp; (corrupt(rcvpkt)</text><path d="M29.5001 297.5 233.5 297.5" stroke="#000000" stroke-width="2.66667" stroke-linejoin="round" stroke-miterlimit="10" fill="none" fill-rule="evenodd"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(33.3333 474)">sndpkt = make_pkt(ACK, <tspan font-size="19" x="0" y="23">chksum)</tspan><tspan font-size="19" x="0" y="45">udt_send(sndpkt)</tspan><tspan font-size="19" x="-4" y="-159">sndpkt = make_pkt(NAK, chksum)</tspan><tspan font-size="19" x="-4" y="-136">udt_send(sndpkt)</tspan></text><path d="M319.748 418.023 313.434 423.023 307.592 427.209 301.893 430.574 296.71 433.259 291.822 435.123 287.438 436.31 283.216 436.992C283.181 436.997 283.146 437 283.11 437L279.455 437C279.422 437 279.388 436.998 279.356 436.993L276.032 436.493 273.118 435.639C273.074 435.627 273.032 435.609 272.992 435.588L270.5 434.255C270.467 434.237 270.436 434.217 270.407 434.195L268.247 432.528C268.208 432.498 268.173 432.464 268.141 432.426L266.48 430.426C266.455 430.396 266.433 430.364 266.413 430.33L265.084 427.997C265.062 427.959 265.044 427.919 265.031 427.877L264.2 425.377C264.186 425.335 264.176 425.293 264.171 425.249L263.839 422.583 263.833 419.833 264.17 416.922C264.175 416.885 264.182 416.848 264.193 416.812L265.023 413.979C265.033 413.946 265.045 413.914 265.06 413.884L266.389 411.05C266.404 411.018 266.422 410.986 266.443 410.956L268.27 408.29 270.462 405.58 273.182 403.014C273.207 402.991 273.234 402.97 273.262 402.95L276.419 400.784 280.153 398.904 284.183 397.218 288.758 396.022 293.971 395.175 299.52 394.835 305.561 395 312.108 395.839 313.888 396.178C314.25 396.247 314.487 396.596 314.418 396.958 314.349 397.319 314 397.556 313.638 397.487L311.938 397.161 305.524 396.333 299.601 396.165 294.184 396.492 289.094 397.312 284.697 398.449 280.751 400.096 277.173 401.883 274.016 404.05 274.096 403.986 271.498 406.42 269.37 409.044 267.542 411.71 267.596 411.617 266.267 414.45 266.303 414.354 265.472 417.188 265.495 417.078 265.167 419.833 265.162 422.418 265.494 425.084 265.465 424.956 266.296 427.456 266.242 427.337 267.572 429.67 267.505 429.574 269.167 431.574 269.061 431.472 271.221 433.139 271.129 433.079 273.621 434.412 273.495 434.361 276.231 435.174 279.554 435.674 279.455 435.667 283.11 435.667 283.005 435.675 287.091 435.023 291.348 433.877 296.097 432.075 301.216 429.426 306.816 426.125 312.606 421.977 318.92 416.977C319.209 416.749 319.628 416.798 319.857 417.086 320.085 417.375 320.036 417.794 319.748 418.023ZM313.763 396.833 311.894 392.403 319.002 397.833 310.393 400.261Z"/><path d="M308.952 373.001 300.93 372.835 293.531 372.168 287.153 371.335 281.406 369.996 276.495 368.318 272.246 366.297 268.539 364.29C268.502 364.27 268.467 364.246 268.434 364.219L265.593 361.896C265.564 361.872 265.537 361.846 265.513 361.818L263.34 359.328 261.618 356.772C261.596 356.74 261.577 356.705 261.561 356.669L260.391 354.014C260.371 353.967 260.356 353.918 260.346 353.869L259.845 351.213C259.837 351.172 259.833 351.131 259.833 351.089L259.833 348.434C259.833 348.389 259.838 348.345 259.847 348.302L260.348 345.812 261.205 343.242C261.219 343.2 261.237 343.16 261.259 343.122L262.596 340.798C262.617 340.763 262.64 340.729 262.667 340.698L264.505 338.541C264.529 338.513 264.555 338.486 264.583 338.463L266.756 336.637 269.324 334.932 272.069 333.563C272.101 333.547 272.133 333.534 272.166 333.524L275.342 332.528C275.375 332.517 275.409 332.51 275.443 332.505L278.785 332.007 282.53 331.834 286.462 332.168 290.55 333.009 294.795 334.354 299.058 336.38 303.606 338.887C303.635 338.903 303.662 338.921 303.688 338.941L308.034 342.261 312.74 346.266 317.299 350.957 318.523 352.483C318.753 352.77 318.706 353.19 318.419 353.42 318.131 353.65 317.711 353.603 317.482 353.315L316.342 351.886 311.876 347.282 307.224 343.32 302.879 340.001 302.962 340.055 298.484 337.583 294.391 335.625 290.28 334.315 286.347 333.496 282.59 333.166 278.982 333.325 275.639 333.823 275.741 333.8 272.565 334.796 272.662 334.757 270.06 336.043 267.614 337.658 265.441 339.483 265.52 339.405 263.681 341.563 263.752 341.463 262.415 343.787 262.469 343.667 261.655 346.076 261.154 348.565 261.167 348.434 261.167 351.089 261.155 350.966 261.657 353.621 261.612 353.476 262.781 356.132 262.725 356.029 264.345 358.452 266.517 360.941 266.437 360.864 269.278 363.187 269.174 363.117 272.82 365.093 276.927 367.056 281.709 368.697 287.326 370.013 293.65 370.84 300.958 371.502 308.98 371.668C309.348 371.675 309.64 371.98 309.632 372.348 309.625 372.716 309.32 373.008 308.952 373.001ZM318.002 352.899 319.461 348.318 321.333 357.064 313.213 353.314Z"/></g></svg>