<svg width="960" height="720" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" overflow="hidden"><defs><clipPath id="clip0"><rect x="0" y="0" width="960" height="720"/></clipPath></defs><g clip-path="url(#clip0)"><rect x="0" y="0" width="960" height="720" fill="#FFFFFF"/><text font-family="DengXian Light,DengXian Light_MSFontService,sans-serif" font-weight="300" font-size="48" transform="translate(44.6667 98)">rdt2.1: 发送方处理混乱的<tspan font-size="48" x="538" y="0">ACK/NAKs</tspan><tspan fill="#919293" font-family="Arial,Arial_MSFontService,sans-serif" font-weight="400" font-size="19" x="819" y="595">31</tspan></text><path d="M276.5 311.5C276.5 283.334 299.557 260.5 328 260.5 356.443 260.5 379.5 283.334 379.5 311.5 379.5 339.667 356.443 362.5 328 362.5 299.557 362.5 276.5 339.667 276.5 311.5Z" stroke="#000000" stroke-width="1.33333" stroke-linejoin="round" stroke-miterlimit="10" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="SimHei,SimHei_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(295.167 294)">等待来自<tspan font-size="19" x="9.33331" y="23">上层的</tspan><tspan font-size="19" x="13.5" y="45">调用</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="19" x="50.8333" y="45">0</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="21" x="20.1667" y="-97">sndpkt</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="21" x="96" y="-97">= </tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="21" x="114.5" y="-97">make_pkt</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="21" x="212.833" y="-97">(0, data, checksum)</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="21" x="20.1667" y="-72">udt_send</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="21" x="114.833" y="-72">(</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="21" x="122" y="-72">sndpkt</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="21" x="191.833" y="-72">)</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="21" x="21.8334" y="-135">rdt_send(data)</tspan></text><path d="M321 178 631 178" stroke="#FF0000" stroke-width="6" stroke-linejoin="round" stroke-miterlimit="10" fill="none" fill-rule="evenodd"/><path d="M247.488 251.395 268.326 263.303 265.349 268.512 244.512 256.605ZM277.581 272.046 276.837 261.255 288 278 267.906 276.884Z"/><path d="M288.215 586.921 285.183 590.888 282.097 594.122C281.973 594.25 281.838 594.368 281.693 594.472L278.492 596.787C278.355 596.886 278.209 596.974 278.056 597.049L275.024 598.536C274.853 598.62 274.675 598.687 274.491 598.737L271.459 599.564C271.252 599.62 271.039 599.654 270.825 599.665L267.624 599.831C267.401 599.842 267.178 599.829 266.958 599.791L264.094 599.295 260.785 598.407C260.579 598.351 260.38 598.273 260.191 598.175L257.327 596.687C257.189 596.615 257.057 596.533 256.932 596.441L254.236 594.458 251.449 592.238C251.319 592.135 251.199 592.022 251.088 591.899L248.561 589.089 246.136 586.201 243.89 582.756 241.913 579.074 240.176 575.5 238.714 571.596 237.494 567.843 236.72 563.639 236.197 559.892 236.004 556.154C235.996 556.004 236 555.853 236.015 555.704L236.352 552.398 237.078 548.933 238.181 545.622C238.243 545.439 238.323 545.262 238.419 545.095L239.935 542.45C240.033 542.279 240.148 542.117 240.278 541.968L242.3 539.654C242.423 539.513 242.559 539.384 242.707 539.268L245.234 537.285C245.434 537.128 245.653 536.997 245.887 536.895L248.919 535.572 252.846 534.442C253.031 534.39 253.22 534.356 253.411 534.341L255.253 534.19C256.904 534.055 258.352 535.284 258.487 536.936 258.622 538.587 257.393 540.035 255.742 540.17L253.9 540.321 254.466 540.219 251.317 541.072 248.285 542.395 248.938 542.004 246.411 543.988 246.818 543.602 244.797 545.916 245.14 545.434 243.624 548.079 243.862 547.552 242.944 550.191 242.321 553.007 241.985 556.312 241.996 555.863 242.14 559.066 242.628 562.592 243.201 565.992 244.34 569.511 245.573 572.88 247.206 576.248 248.935 579.508 250.732 582.344 253.023 585.077 255.55 587.887 255.189 587.547 257.792 589.625 260.488 591.609 260.093 591.363 262.956 592.85 262.362 592.618 265.118 593.383 267.981 593.879 267.315 593.839 270.516 593.673 269.881 593.775 272.914 592.949 272.381 593.15 275.413 591.662 274.977 591.924 278.178 589.61 277.774 589.961 280.416 587.244 283.448 583.277C284.454 581.961 286.337 581.71 287.653 582.716 288.97 583.722 289.221 585.605 288.215 586.921ZM255.497 537.18 250.12 527.795 267.47 537.992 248.902 545.754Z"/><path d="M493.5 306.5C493.5 277.229 517.229 253.5 546.5 253.5 575.771 253.5 599.5 277.229 599.5 306.5 599.5 335.771 575.771 359.5 546.5 359.5 517.229 359.5 493.5 335.771 493.5 306.5Z" stroke="#000000" stroke-width="1.33333" stroke-linejoin="round" stroke-miterlimit="10" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="SimHei,SimHei_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(527.417 284)">等待<tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="19" x="-13.5" y="23">ACK </tspan><tspan font-size="19" x="32.1667" y="23">或</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="19" x="-9.33331" y="45">NAK 0</tspan></text><path d="M337.169 264.837 338.002 262.464C338.093 262.205 338.219 261.959 338.377 261.734L340.042 259.362C340.177 259.168 340.336 258.991 340.513 258.835L343.01 256.632C343.17 256.491 343.344 256.368 343.529 256.264L346.859 254.399 350.841 252.455 355.792 250.638 361.216 249.2 367.126 247.824 373.399 246.613 380.174 245.577 394.493 244.2 409.561 243.176 425.216 243 440.799 243.34 455.922 244.363 470.03 245.899 476.662 246.934 482.775 248.142 488.406 249.528 493.558 251.097 498.105 252.867 501.03 254.159C502.545 254.83 503.229 256.601 502.559 258.116 501.888 259.632 500.116 260.316 498.601 259.646L495.917 258.455 491.806 256.835 486.968 255.353 481.61 254.028 475.734 252.862 469.379 251.864 455.515 250.349 440.668 249.338 425.282 249 409.967 249.163 395.065 250.173 381.079 251.508 374.534 252.505 368.486 253.668 362.74 255.003 357.842 256.277 353.468 257.85 349.791 259.635 346.461 261.499 346.98 261.131 344.482 263.334 344.953 262.808 343.288 265.181 343.663 264.451 342.831 266.824C342.282 268.387 340.57 269.21 339.007 268.661 337.443 268.113 336.621 266.401 337.169 264.837ZM499.816 256.902 502.503 246.425 507.833 265.831 489.11 258.452Z"/><path d="M575.164 261.886 578.793 259.078C578.907 258.99 579.026 258.91 579.151 258.84L582.945 256.692 586.595 254.944C586.756 254.867 586.924 254.805 587.096 254.758L590.725 253.767 594.369 253.198 597.963 253.004C598.113 252.996 598.263 253 598.412 253.015L601.711 253.345C601.882 253.362 602.051 253.394 602.216 253.44L605.185 254.266 608.439 255.517 611.433 256.92C611.608 257.002 611.775 257.101 611.93 257.216L614.404 259.032 616.892 261.156C617.006 261.254 617.113 261.361 617.212 261.475L621.335 266.265C621.435 266.381 621.526 266.504 621.607 266.634L623.256 269.276 624.746 272.397 625.982 275.56 626.901 278.817 627.599 281.942C627.634 282.101 627.656 282.262 627.665 282.425L627.83 285.398 627.665 288.704 627.135 292.003 626.229 295.164C626.186 295.311 626.131 295.455 626.066 295.594L624.746 298.402 622.926 301.357C622.847 301.485 622.758 301.606 622.66 301.72L620.681 304.032C620.585 304.145 620.48 304.25 620.368 304.347L617.894 306.494 614.624 308.705C614.505 308.785 614.38 308.856 614.25 308.918L610.786 310.57 609.183 311.147C607.618 311.692 605.908 310.866 605.363 309.301 604.818 307.736 605.645 306.026 607.209 305.481L608.204 305.154 611.668 303.502 611.293 303.715 613.962 301.962 616.436 299.815 616.123 300.13 618.102 297.818 617.836 298.18 619.316 295.85 620.635 293.042 620.472 293.473 621.216 291.018 621.675 288.371 621.84 285.731 621.675 282.758 621.741 283.242 621.12 280.421 620.389 277.732 619.316 274.949 618.166 272.453 616.517 269.811 616.788 270.18 612.665 265.39 612.984 265.709 610.853 263.869 608.379 262.052 608.876 262.347 606.262 261.108 603.578 260.046 600.608 259.221 601.113 259.315 597.815 258.985 598.263 258.996 595.26 259.132 592.306 259.555 588.677 260.546 589.178 260.36 585.9 261.914 582.107 264.061 582.465 263.823 578.836 266.631C577.525 267.645 575.641 267.405 574.627 266.094 573.613 264.784 573.854 262.899 575.164 261.886ZM608.196 308.314 615.953 315.853 596.464 310.835 612.172 298.255Z"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="21" transform="translate(631.333 331)">udt_send(sndpkt)<tspan font-size="21" x="-4.33331" y="-92">rdt_rcv</tspan><tspan font-size="21" x="68" y="-92">(</tspan><tspan font-size="21" x="75.1667" y="-92">rcvpkt</tspan>) &amp;&amp; <tspan font-size="21" x="-4.33331" y="-67">( corrupt(</tspan>rcvpkt) ||<tspan font-size="21" x="-4.33331" y="-41">isNAK</tspan><tspan font-size="21" x="59.5" y="-41">(</tspan><tspan font-size="21" x="66.6667" y="-41">rcvpkt</tspan>) )</text><path d="M637 310 799 310" stroke="#FF0000" stroke-width="6" stroke-linejoin="round" stroke-miterlimit="10" fill="none" fill-rule="evenodd"/><path d="M278.449 491.491 277.179 490.826C276.735 490.593 276.356 490.252 276.077 489.835L274.966 488.172C274.869 488.027 274.785 487.874 274.715 487.715L273.763 485.553 272.584 482.394C272.535 482.261 272.495 482.125 272.465 481.986L271.671 478.327 270.863 474.096 270.056 469.198 269.402 463.744 268.765 458.069 268.279 451.985 267.639 438.922 267.161 425.075 267 410.703 267.159 396.5 267.637 382.792 268.434 369.905 269.08 363.787 269.551 358.356 270.197 353.093 271.014 348.448 271.657 345.21C271.98 343.585 273.56 342.529 275.185 342.852 276.81 343.175 277.865 344.755 277.542 346.38L276.922 349.492 276.152 353.827 275.528 358.875 275.047 364.42 274.423 370.276 273.633 383.001 273.159 396.567 273 410.636 273.157 424.868 273.631 438.629 274.26 451.509 274.727 457.4 275.36 463.033 275.976 468.223 276.756 472.971 277.535 477.055 278.329 480.714 278.209 480.306 279.253 483.134 280.206 485.296 279.955 484.839 281.066 486.502 279.964 485.511 281.233 486.176C282.701 486.945 283.268 488.758 282.499 490.226 281.73 491.693 279.917 492.26 278.449 491.491ZM274.6 345.795 263.883 347.261 279.841 335 280.075 355.123Z"/><path d="M369.518 567.578 370.657 568.338 370.25 568.11 374.579 570.11 379.129 571.664 384.659 573.289 390.831 574.748 397.388 576.058 404.375 577.029 419.604 578.684 435.781 579.672 452.445 579.833 469.007 579.501 485.171 578.341 500.178 576.522 507.107 575.53 513.422 574.228 519.292 572.756 524.725 571.273 529.08 569.541 532.831 567.651 535.868 565.652 535.462 565.969 537.793 563.803 537.262 564.458 538.761 561.958 538.392 562.912 538.892 560.412C539.216 558.787 540.797 557.734 542.421 558.058 544.046 558.383 545.1 559.963 544.775 561.588L544.276 564.088C544.208 564.425 544.084 564.748 543.907 565.042L542.408 567.542C542.263 567.785 542.085 568.005 541.878 568.197L539.547 570.364C539.42 570.481 539.284 570.587 539.14 570.681L535.516 573.016 531.275 575.125 526.305 577.061 520.748 578.577 514.629 580.105 507.956 581.47 500.898 582.478 485.599 584.326 469.127 585.499 452.386 585.833 435.414 585.661 418.955 584.649 403.545 582.971 396.211 581.942 389.447 580.586 382.964 579.045 377.171 577.336 372.063 575.557 367.734 573.557C367.592 573.491 367.456 573.415 367.327 573.329L366.188 572.569C364.81 571.649 364.438 569.787 365.358 568.408 366.277 567.03 368.14 566.658 369.518 567.578ZM367.853 570.074 364.974 580.5 360 561 378.585 568.72Z"/><path d="M586.185 482.777 587.373 479.74 588.624 475.481 589.929 470.417 591.062 464.895 591.86 458.932 592.691 452.452 594.013 438.549 594.67 423.865 594.833 408.634 594.501 393.399 593.836 378.803 592.351 365.157 591.526 358.891 590.541 352.993 589.399 347.622 588.245 342.682 586.832 338.648 585.514 335.025 585.711 335.457 584.044 332.457 584.377 332.938 582.543 330.771 583.069 331.26 581.235 329.926 582.272 330.41 580.272 329.91C578.665 329.509 577.688 327.88 578.09 326.272 578.491 324.665 580.12 323.688 581.728 324.09L583.728 324.59C584.101 324.683 584.453 324.847 584.765 325.074L586.598 326.407C586.792 326.548 586.968 326.712 587.123 326.896L588.957 329.062C589.083 329.211 589.194 329.372 589.289 329.543L590.956 332.543C591.033 332.682 591.099 332.826 591.153 332.975L592.502 336.685 594.088 341.318 595.268 346.378 596.459 352.007 597.474 358.109 598.316 364.51 599.83 378.53 600.499 393.268 600.833 408.699 600.664 424.135 599.987 439.118 598.642 453.215 597.806 459.735 596.938 466.105 595.738 471.916 594.376 477.186 592.96 481.927 591.772 484.963C591.168 486.506 589.428 487.267 587.885 486.664 586.342 486.06 585.581 484.32 586.185 482.777ZM588.978 483.87 599.69 485.372 581 492.833 586.245 473.404Z"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="21" transform="translate(342.667 658)">sndpkt = make_pkt(1, data, checksum)<tspan font-size="21" x="0" y="25">udt_send(sndpkt)</tspan><tspan font-size="21" x="7.8334" y="-42">rdt_send(data)</tspan></text><path d="M346 634 675 634" stroke="#FF0000" stroke-width="6" stroke-linejoin="round" stroke-miterlimit="10" fill="none" fill-rule="evenodd"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="21" transform="translate(606.333 391)">rdt_rcv(rcvpkt) <tspan font-size="21" x="0" y="25">&amp;&amp; notcorrupt(rcvpkt) </tspan><tspan font-size="21" x="0" y="51">&amp;&amp; isACK(rcvpkt)</tspan></text><path d="M611 464 724 464" stroke="#FF0000" stroke-width="6" stroke-linejoin="round" stroke-miterlimit="10" fill="none" fill-rule="evenodd"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="21" transform="translate(43 666)">udt_send(sndpkt)<tspan font-size="21" x="-2.83328" y="-99">rdt_rcv(rcvpkt) &amp;&amp; </tspan><tspan font-size="21" x="-2.83328" y="-74">( corrupt(rcvpkt) ||</tspan><tspan font-size="21" x="-2.83328" y="-48">isNAK(rcvpkt) )</tspan></text><path d="M44 641 220 641" stroke="#FF0000" stroke-width="6" stroke-linejoin="round" stroke-miterlimit="10" fill="none" fill-rule="evenodd"/><text font-family="Arial,Arial_MSFontService,sans-serif" font-weight="700" font-size="21" transform="translate(33.6667 372)">rdt_rcv(rcvpkt) <tspan font-size="21" x="0" y="25">&amp;&amp; notcorrupt(rcvpkt) </tspan><tspan font-size="21" x="0" y="51">&amp;&amp; isACK(rcvpkt)</tspan></text><path d="M40 466 237 466" stroke="#FF0000" stroke-width="6" stroke-linejoin="round" stroke-miterlimit="10" fill="none" fill-rule="evenodd"/><path d="M517.5 541C517.5 513.11 540.334 490.5 568.5 490.5 596.667 490.5 619.5 513.11 619.5 541 619.5 568.89 596.667 591.5 568.5 591.5 540.334 591.5 517.5 568.89 517.5 541Z" stroke="#000000" stroke-width="1.33333" stroke-linejoin="round" stroke-miterlimit="10" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="SimHei,SimHei_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(537.833 524)">等待来自<tspan font-size="19" x="-1" y="23">上层的</tspan><tspan font-size="19" x="3.16669" y="45">调用</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="19" x="40.5" y="45">1</tspan></text><path d="M261.5 534C261.5 506.11 284.334 483.5 312.5 483.5 340.667 483.5 363.5 506.11 363.5 534 363.5 561.89 340.667 584.5 312.5 584.5 284.334 584.5 261.5 561.89 261.5 534Z" stroke="#000000" stroke-width="1.33333" stroke-linejoin="round" stroke-miterlimit="10" fill="#FFFFFF" fill-rule="evenodd"/><text font-family="SimHei,SimHei_MSFontService,sans-serif" font-weight="700" font-size="19" transform="translate(294.087 517)">等待<tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="19" x="-11.2667" y="23">ACK </tspan><tspan font-size="19" x="34.4" y="23">或</tspan><tspan font-family="Arial,Arial_MSFontService,sans-serif" font-size="19" x="-9.33334" y="45">NAK 1</tspan><tspan font-family="Symbol,Symbol_MSFontService,sans-serif" font-size="21" x="371.413" y="-26">L</tspan><tspan font-family="Symbol,Symbol_MSFontService,sans-serif" font-size="21" x="-178.087" y="-23">L</tspan></text></g></svg>